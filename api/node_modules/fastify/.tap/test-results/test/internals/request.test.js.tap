TAP version 14
# Subtest: Regular request
    ok 1 - type is Request
    ok 2 - type is Function
    ok 3 - type is Function
    ok 4 - type is Function
    ok 5 - should be equal
    ok 6 - should be equal
    ok 7 - should be equal
    ok 8 - should be equal
    ok 9 - should be equal
    ok 10 - should be equal
    ok 11 - should be equal
    ok 12 - should be equal
    ok 13 - should be equal
    ok 14 - should be equal
    ok 15 - should be equal
    ok 16 - should be equal
    ok 17 - should be equal
    ok 18 - should be equal
    ok 19 - should be equal
    ok 20 - should be equal
    ok 21 - should be equal
    ok 22 - should be equal
    ok 23 - should be equal
    ok 24 - should be equal
    ok 25 - should be equal
    1..25
ok 1 - Regular request # time=3.417ms

# Subtest: Request with undefined config
    ok 1 - type is Request
    ok 2 - type is Function
    ok 3 - type is Function
    ok 4 - type is Function
    ok 5 - should be equal
    ok 6 - should be equal
    ok 7 - should be equal
    ok 8 - should be equal
    ok 9 - should be equal
    ok 10 - should be equal
    ok 11 - should be equal
    ok 12 - should be equal
    ok 13 - should be equal
    ok 14 - should be equal
    ok 15 - should be equal
    ok 16 - should be equal
    ok 17 - should be equal
    ok 18 - should be equal
    ok 19 - should be equal
    ok 20 - should be equal
    ok 21 - should be equal
    ok 22 - should be equal
    ok 23 - should be equal
    ok 24 - should be equal
    ok 25 - should be equal
    1..25
ok 2 - Request with undefined config # time=1.418ms

# Subtest: Regular request - hostname from authority
    1..3
    ok 1 - type is Request
    ok 2 - should be equal
    ok 3 - should be equal
ok 3 - Regular request - hostname from authority # time=2.296ms

# Subtest: Regular request - host header has precedence over authority
    1..3
    ok 1 - type is Request
    ok 2 - should be equal
    ok 3 - should be equal
ok 4 - Regular request - host header has precedence over authority # time=0.315ms

# Subtest: Request with trust proxy
    1..22
    ok 1 - type is _Request
    ok 2 - should be equal
    ok 3 - should be equal
    ok 4 - should be equivalent
    ok 5 - should be equal
    ok 6 - should be equal
    ok 7 - should be equal
    ok 8 - should be equal
    ok 9 - should be equivalent
    ok 10 - should be equal
    ok 11 - should be equal
    ok 12 - should be equal
    ok 13 - should be equal
    ok 14 - should be equal
    ok 15 - should be equal
    ok 16 - type is Function
    ok 17 - type is Function
    ok 18 - type is Function
    ok 19 - should be equal
    ok 20 - should be equal
    ok 21 - should be equal
    ok 22 - should be equal
ok 5 - Request with trust proxy # time=1.936ms

# Subtest: Request with trust proxy, encrypted
    1..2
    ok 1 - type is _Request
    ok 2 - should be equal
ok 6 - Request with trust proxy, encrypted # time=0.55ms

# Subtest: Request with trust proxy - no x-forwarded-host header
    1..2
    ok 1 - type is _Request
    ok 2 - should be equal
ok 7 - Request with trust proxy - no x-forwarded-host header # time=0.468ms

# Subtest: Request with trust proxy - no x-forwarded-host header and fallback to authority
    1..2
    ok 1 - type is _Request
    ok 2 - should be equal
ok 8 - Request with trust proxy - no x-forwarded-host header and fallback to authority # time=0.272ms

# Subtest: Request with trust proxy - x-forwarded-host header has precedence over host
    1..2
    ok 1 - type is _Request
    ok 2 - should be equal
ok 9 - Request with trust proxy - x-forwarded-host header has precedence over host # time=0.263ms

# Subtest: Request with trust proxy - handles multiple entries in x-forwarded-host/proto
    1..3
    ok 1 - type is _Request
    ok 2 - should be equal
    ok 3 - should be equal
ok 10 - Request with trust proxy - handles multiple entries in x-forwarded-host/proto # time=0.283ms

# Subtest: Request with trust proxy - plain
    1..1
    ok 1 - should be equivalent
ok 11 - Request with trust proxy - plain # time=0.218ms

# Subtest: Request with undefined socket
    1..18
    ok 1 - type is Request
    ok 2 - should be equal
    ok 3 - should be equal
    ok 4 - should be equivalent
    ok 5 - should be equal
    ok 6 - should be equal
    ok 7 - should be equal
    ok 8 - should be equal
    ok 9 - should be equal
    ok 10 - should be equal
    ok 11 - should be equivalent
    ok 12 - should be equal
    ok 13 - should be equal
    ok 14 - should be equal
    ok 15 - should be equivalent
    ok 16 - type is Function
    ok 17 - type is Function
    ok 18 - type is Function
ok 12 - Request with undefined socket # time=0.65ms

# Subtest: Request with trust proxy and undefined socket
    1..1
    ok 1 - should be equivalent
ok 13 - Request with trust proxy and undefined socket # time=0.218ms

1..13
