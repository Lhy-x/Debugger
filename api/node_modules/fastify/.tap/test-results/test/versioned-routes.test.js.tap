TAP version 14
# Subtest: Should register a versioned route
    1..11
    ok 1 - should not error
    ok 2 - should be equivalent
    ok 3 - should be equal
    ok 4 - should not error
    ok 5 - should be equivalent
    ok 6 - should be equal
    ok 7 - should not error
    ok 8 - should be equivalent
    ok 9 - should be equal
    ok 10 - should not error
    ok 11 - should be equal
ok 1 - Should register a versioned route # time=20.923ms

# Subtest: Should register a versioned route via route constraints
    1..6
    ok 1 - should not error
    ok 2 - should be equivalent
    ok 3 - should be equal
    ok 4 - should not error
    ok 5 - should be equivalent
    ok 6 - should be equal
ok 2 - Should register a versioned route via route constraints # time=1.942ms

# Subtest: Should register the same route with different versions
    1..8
    ok 1 - should not error
    ok 2 - should be equal
    ok 3 - should be equal
    ok 4 - should not error
    ok 5 - should be equal
    ok 6 - should be equal
    ok 7 - should not error
    ok 8 - should be equal
ok 3 - Should register the same route with different versions # time=2.04ms

# Subtest: The versioned route should take precedence
    1..3
    ok 1 - should not error
    ok 2 - should be equivalent
    ok 3 - should be equal
ok 4 - The versioned route should take precedence # time=1.453ms

# Subtest: Versioned route but not version header should return a 404
    1..2
    ok 1 - should not error
    ok 2 - should be equal
ok 5 - Versioned route but not version header should return a 404 # time=1.25ms

# Subtest: Should register a versioned route
    1..6
    ok 1 - should not error
    ok 2 - should not error
    ok 3 - should be equal
    ok 4 - should be equivalent
    ok 5 - should not error
    ok 6 - should be equal
ok 6 - Should register a versioned route # time=13.091ms

# Subtest: Shorthand route declaration
    1..5
    ok 1 - should not error
    ok 2 - should be equivalent
    ok 3 - should be equal
    ok 4 - should not error
    ok 5 - should be equal
ok 7 - Shorthand route declaration # time=3.041ms

# Subtest: The not found handler should not erase the Accept-Version header
    1..13
    ok 1 - should be equivalent
    ok 2 - should be equivalent
    ok 3 - should be equivalent
    ok 4 - should be equivalent
    ok 5 - should be equivalent
    ok 6 - should be equivalent
    ok 7 - should be equivalent
    ok 8 - should be equivalent
    ok 9 - should be equivalent
    ok 10 - should be equivalent
    ok 11 - should not error
    ok 12 - should be equivalent
    ok 13 - should be equal
ok 8 - The not found handler should not erase the Accept-Version header # time=2.467ms

# Subtest: Bad accept version (inject)
    1..4
    ok 1 - should not error
    ok 2 - should be equal
    ok 3 - should not error
    ok 4 - should be equal
ok 9 - Bad accept version (inject) # time=1.613ms

# Subtest: Bad accept version (server)
    1..5
    ok 1 - should not error
    ok 2 - should not error
    ok 3 - should be equal
    ok 4 - should not error
    ok 5 - should be equal
ok 10 - Bad accept version (server) # time=4.188ms

# Subtest: test log stream
    1..3
    ok 1 - should not error
    ok 2 - should be equal
    ok 3 - should be equal
ok 11 - test log stream # time=5.422ms

# Subtest: Should register a versioned route with custom versioning strategy
    1..8
    ok 1 - should not error
    ok 2 - should be equivalent
    ok 3 - should be equal
    ok 4 - should not error
    ok 5 - should be equivalent
    ok 6 - should be equal
    ok 7 - should not error
    ok 8 - should be equal
ok 12 - Should register a versioned route with custom versioning strategy # time=3.232ms

# Subtest: Should get error using an invalid a versioned route, using default validation (deprecated versioning option)
    1..3
    ok 1 - should be equal
    ok 2 - should not error
    ok 3 - should be equal
ok 13 - Should get error using an invalid a versioned route, using default validation (deprecated versioning option) # time=1.832ms

# Subtest: Vary header check (for documentation example)
    1..8
    ok 1 - should not error
    ok 2 - should be equivalent
    ok 3 - should be equal
    ok 4 - should be equal
    ok 5 - should not error
    ok 6 - should be equivalent
    ok 7 - should be equal
    ok 8 - should be equal
ok 14 - Vary header check (for documentation example) # time=2.336ms

# Subtest: Should trigger a warning when a versioned route is registered via version option
    1..4
    ok 1 - FSTDEP008 has been emitted
    ok 2 - should not error
    ok 3 - should be equivalent
    ok 4 - should be equal
ok 15 - Should trigger a warning when a versioned route is registered via version option # time=10.462ms

1..15
