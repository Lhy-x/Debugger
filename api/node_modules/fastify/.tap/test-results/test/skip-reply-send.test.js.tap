TAP version 14
# Subtest: skip automatic reply.send() with reply.sent = true and a body
    ok 1 - should not be equal
    ok 2 - should not be equal
    ok 3 - should not be equal
    ok 4 - should not be equal
    ok 5 - should be equal
    ok 6 - should be equal
    1..6
ok 1 - skip automatic reply.send() with reply.sent = true and a body # time=19.158ms

# Subtest: skip automatic reply.send() with reply.sent = true and no body
    ok 1 - should not be equal
    ok 2 - should not be equal
    ok 3 - should not be equal
    ok 4 - should not be equal
    ok 5 - should be equal
    ok 6 - should be equal
    1..6
ok 2 - skip automatic reply.send() with reply.sent = true and no body # time=1.973ms

# Subtest: skip automatic reply.send() with reply.sent = true and an error
    ok 1 - should be equal
    ok 2 - should be equal
    ok 3 - should be equal
    ok 4 - should be equal
    ok 5 - should be equal
    1..5
ok 3 - skip automatic reply.send() with reply.sent = true and an error # time=2.971ms

# Subtest: Hijacking inside onRequest skips all the following hooks and handler execution
    1..4
    # Subtest: Sending a response using reply.raw => onResponse hook is called
        ok 1 - should not be equal
        ok 2 - should not be equal
        ok 3 - onResponse should be called
        ok 4 - should not be equal
        ok 5 - should not be equal
        ok 6 - should be equal
        ok 7 - should be equal
        1..7
    ok 1 - Sending a response using reply.raw => onResponse hook is called # time=6.476ms
    
    # Subtest: Sending a response using req.socket => onResponse not called
        ok 1 - should not be equal
        ok 2 - should not be equal
        ok 3 - should not be equal
        ok 4 - should not be equal
        ok 5 - should not error
        ok 6 - should not be equal
        ok 7 - should not be equal
        ok 8 - should match pattern
        1..8
    ok 2 - Sending a response using req.socket => onResponse not called # time=33.33ms
    
    # Subtest: Throwing an error does not trigger any hooks
        ok 1 - should not be equal
        ok 2 - should not be equal
        ok 3 - should not error
        1..3
    ok 3 - Throwing an error does not trigger any hooks # time=1004.089ms
    
    # Subtest: Calling reply.send() after hijacking logs a warning
        ok 1 - should be equal
        ok 2 - should not error
        ok 3 - should be equal
        1..3
    ok 4 - Calling reply.send() after hijacking logs a warning # time=1002.305ms
    
ok 4 - Hijacking inside onRequest skips all the following hooks and handler execution # time=2049.652ms

# Subtest: Hijacking inside preParsing skips all the following hooks and handler execution
    1..4
    # Subtest: Sending a response using reply.raw => onResponse hook is called
        ok 1 - should not be equal
        ok 2 - should not be equal
        ok 3 - onRequest should be called
        ok 4 - onResponse should be called
        ok 5 - should not be equal
        ok 6 - should not be equal
        ok 7 - should be equal
        ok 8 - should be equal
        1..8
    ok 1 - Sending a response using reply.raw => onResponse hook is called # time=4.493ms
    
    # Subtest: Sending a response using req.socket => onResponse not called
        ok 1 - should not be equal
        ok 2 - should not be equal
        ok 3 - should not be equal
        ok 4 - should not be equal
        ok 5 - should not error
        ok 6 - should not be equal
        ok 7 - should not be equal
        ok 8 - onRequest should be called
        ok 9 - should match pattern
        1..9
    ok 2 - Sending a response using req.socket => onResponse not called # time=5.596ms
    
    # Subtest: Throwing an error does not trigger any hooks
        ok 1 - should not be equal
        ok 2 - should not be equal
        ok 3 - onRequest should be called
        ok 4 - should not error
        1..4
    ok 3 - Throwing an error does not trigger any hooks # time=1002.69ms
    
    # Subtest: Calling reply.send() after hijacking logs a warning
        ok 1 - onRequest should be called
        ok 2 - should be equal
        ok 3 - should not error
        ok 4 - should be equal
        1..4
    ok 4 - Calling reply.send() after hijacking logs a warning # time=1005.53ms
    
ok 5 - Hijacking inside preParsing skips all the following hooks and handler execution # time=2023.585ms

# Subtest: Hijacking inside preValidation skips all the following hooks and handler execution
    1..4
    # Subtest: Sending a response using reply.raw => onResponse hook is called
        ok 1 - should not be equal
        ok 2 - should not be equal
        ok 3 - onRequest should be called
        ok 4 - preParsing should be called
        ok 5 - onResponse should be called
        ok 6 - should not be equal
        ok 7 - should not be equal
        ok 8 - should be equal
        ok 9 - should be equal
        1..9
    ok 1 - Sending a response using reply.raw => onResponse hook is called # time=8.896ms
    
    # Subtest: Sending a response using req.socket => onResponse not called
        ok 1 - should not be equal
        ok 2 - should not be equal
        ok 3 - should not be equal
        ok 4 - should not be equal
        ok 5 - should not error
        ok 6 - should not be equal
        ok 7 - should not be equal
        ok 8 - onRequest should be called
        ok 9 - preParsing should be called
        ok 10 - should match pattern
        1..10
    ok 2 - Sending a response using req.socket => onResponse not called # time=6.973ms
    
    # Subtest: Throwing an error does not trigger any hooks
        ok 1 - should not be equal
        ok 2 - should not be equal
        ok 3 - onRequest should be called
        ok 4 - preParsing should be called
        ok 5 - should not error
        1..5
    ok 3 - Throwing an error does not trigger any hooks # time=1007.359ms
    
    # Subtest: Calling reply.send() after hijacking logs a warning
        ok 1 - onRequest should be called
        ok 2 - preParsing should be called
        ok 3 - should be equal
        ok 4 - should not error
        ok 5 - should be equal
        1..5
    ok 4 - Calling reply.send() after hijacking logs a warning # time=1004.918ms
    
ok 6 - Hijacking inside preValidation skips all the following hooks and handler execution # time=2033.503ms

# Subtest: Hijacking inside preHandler skips all the following hooks and handler execution
    1..4
    # Subtest: Sending a response using reply.raw => onResponse hook is called
        ok 1 - should not be equal
        ok 2 - should not be equal
        ok 3 - onRequest should be called
        ok 4 - preParsing should be called
        ok 5 - preValidation should be called
        ok 6 - onResponse should be called
        ok 7 - should not be equal
        ok 8 - should not be equal
        ok 9 - should be equal
        ok 10 - should be equal
        1..10
    ok 1 - Sending a response using reply.raw => onResponse hook is called # time=8.022ms
    
    # Subtest: Sending a response using req.socket => onResponse not called
        ok 1 - should not be equal
        ok 2 - should not be equal
        ok 3 - should not be equal
        ok 4 - should not be equal
        ok 5 - should not error
        ok 6 - should not be equal
        ok 7 - should not be equal
        ok 8 - onRequest should be called
        ok 9 - preParsing should be called
        ok 10 - preValidation should be called
        ok 11 - should match pattern
        1..11
    ok 2 - Sending a response using req.socket => onResponse not called # time=8.488ms
    
    # Subtest: Throwing an error does not trigger any hooks
        ok 1 - should not be equal
        ok 2 - should not be equal
        ok 3 - onRequest should be called
        ok 4 - preParsing should be called
        ok 5 - preValidation should be called
        ok 6 - should not error
        1..6
    ok 3 - Throwing an error does not trigger any hooks # time=1005.568ms
    
    # Subtest: Calling reply.send() after hijacking logs a warning
        ok 1 - onRequest should be called
        ok 2 - preParsing should be called
        ok 3 - preValidation should be called
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        1..6
    ok 4 - Calling reply.send() after hijacking logs a warning # time=1006.474ms
    
ok 7 - Hijacking inside preHandler skips all the following hooks and handler execution # time=2032.58ms

# Subtest: Hijacking inside handler skips all the following hooks and handler execution
    1..4
    # Subtest: Sending a response using reply.raw => onResponse hook is called
        ok 1 - should not be equal
        ok 2 - should not be equal
        ok 3 - onRequest should be called
        ok 4 - preParsing should be called
        ok 5 - preValidation should be called
        ok 6 - onResponse should be called
        ok 7 - should not be equal
        ok 8 - should not be equal
        ok 9 - should be equal
        ok 10 - should be equal
        1..10
    ok 1 - Sending a response using reply.raw => onResponse hook is called # time=10.437ms
    
    # Subtest: Sending a response using req.socket => onResponse not called
        ok 1 - should not be equal
        ok 2 - should not be equal
        ok 3 - should not be equal
        ok 4 - should not be equal
        ok 5 - should not error
        ok 6 - should not be equal
        ok 7 - should not be equal
        ok 8 - onRequest should be called
        ok 9 - preParsing should be called
        ok 10 - preValidation should be called
        ok 11 - should match pattern
        1..11
    ok 2 - Sending a response using req.socket => onResponse not called # time=8.064ms
    
    # Subtest: Throwing an error does not trigger any hooks
        ok 1 - onRequest should be called
        ok 2 - preParsing should be called
        ok 3 - preValidation should be called
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        1..6
    ok 3 - Throwing an error does not trigger any hooks # time=1006.259ms
    
    # Subtest: Calling reply.send() after hijacking logs a warning
        ok 1 - onRequest should be called
        ok 2 - preParsing should be called
        ok 3 - preValidation should be called
        ok 4 - should be equal
        ok 5 - should not error
        ok 6 - should be equal
        1..6
    ok 4 - Calling reply.send() after hijacking logs a warning # time=1002.914ms
    
ok 8 - Hijacking inside handler skips all the following hooks and handler execution # time=2032.954ms

1..8
